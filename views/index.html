<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../public/css/styles.css">
    <script src="../../public/jsm/three.min.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.138.0/build/three.module.js",
          "OrbitControls": "https://unpkg.com/three@0.138.0/examples/jsm/controls/OrbitControls.js"
        }
      }
    </script>
<body>
    <!-- Heard page -->
    <header>
        <div class="screen_frame">
            <div class="menu_navbar">
                <div class="menu">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" id="menu">
                        <path fill="#fff"
                            d="M3 6a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 6a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm1 5a1 1 0 1 0 0 2h16a1 1 0 1 0 0-2H4z">
                        </path>
                    </svg>
                </div>
                <ul>
                    <li>
                        <a class="active" href="#project">project</a>
                    </li>
                    <li>
                        <a href="#keep">the keep</a>
                    </li>
                    <li>
                        <a href="#factions">factions</a>
                    </li>
                    <li>
                        <a href="#world">the world</a>
                    </li>
                </ul>
            </div>
            <div class="menu_logo">
                <div class="logo">
                    <img src="../public/image/logo_web_game.png" style="height: 24px;width: 24px;">
                </div>
                <div class="screen_content" style="pointer-events: none">

                </div>
            </div>
        </div>
    </header>

    <!-- Body page -->
    <div class="main">
        <section id="project" style="position: relative;">
            <div id="abc" style="position: fixed;">
                <div class="screen_content">
                    <div class="canvas-container"></div>

                    <p id="screen_content_header"></p>
                    <div class="screen_content_title">
                        <h1>project</h1>
                        <h1>technology</h1>
                        <h1>characters</h1>
                    </div>
                </div>
            </div>
            <img src="../public/image/red-hood.jpg"> 
        </section>
        <section id="keep" class="reveal">
            <img src="../public/image/thresh.jpg">

        </section>
        <section id="factions" class="reveal">
            <img src="../public/image/robot-girl.jpg">

        </section>
        <section id="world" class="reveal">
            <img src="../public/image/final-assasin.jpg">
        </section>
    </div>

    <!-- Footer page -->
    <!-- <footer></footer> -->
    <script src="../public/js/index.js" />
</body>

  <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.0/gsap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>  

  <script type="module">
    import { OrbitControls } from "../../public/jsm/controls/OrbitControls.js";
    import { FBXLoader } from "../../public/jsm/loaders/FBXLoader.js";
    import { GLTFLoader } from "../../public/jsm/loaders/GLTFLoader.js";

    // const tl = gsap.timeline();
    const container = document.querySelector('.canvas-container');
    const camera = new THREE.PerspectiveCamera(
      85,
      window.innerWidth / window.innerHeight,
      1,
      1000
    );
    //camera.position.set(900, 400, 900);
    camera.position.set(-5, 5, 10);

    const scene = new THREE.Scene();

    scene.background = null
    // scene.fog = new THREE.Fog("#27313A", 150, 250);

    const ambientLight = new THREE.AmbientLight("#FFFFFF");
    scene.add(ambientLight);

    const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff);
    hemiLight.position.set(10, 20, 10);
    scene.add(hemiLight);

    const dirLight = new THREE.DirectionalLight("#ffffff");
    dirLight.position.set(10, 20, 10);
    dirLight.intensity = 1;
    dirLight.castShadow = true;
    dirLight.shadow.camera.top = 1000;
    dirLight.shadow.camera.bottom = -1000;
    dirLight.shadow.camera.left = -1000;
    dirLight.shadow.camera.right = 1000;
    dirLight.shadow.camera.far = 2000;
    dirLight.shadow.mapSize.width = 2048;
    dirLight.shadow.mapSize.height = 2048;
    scene.add(dirLight);    

    const loader = new GLTFLoader();

    loader.load("../../public/models/JinxPoseRender.glb", ( gltf ) => {
      gltf.scene.scale.set(5, 5, 5);
      gltf.scene.rotation.y = 5
    //   gltf.scene.position.y = -3
      scene.add( gltf.scene );
    });

    const renderer = new THREE.WebGLRenderer({
    //   canvas: canvas,
      antialias: true,
      alpha: false,
    });
    
    renderer.setClearColor( 0x000000, 0 );
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.autoClear = true;
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    container.appendChild(renderer.domElement);

    window.addEventListener("resize", onWindowResize, false);

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      render();
    }

    function animate() {
      requestAnimationFrame(animate);
      render();
    }

    function render() {
      renderer.render(scene, camera);
    }   

    let oldx = 0
    let oldy = 0
    window.onmousemove = function(ev) {
        let changeX = ev.x - oldx
        let changeY = ev.y - oldy
        camera.position.x += changeX/1000
        camera.position.y += changeY/1000

        oldx = ev.x
        oldy = ev.y
    }

    animate();   
  </script>

</html>