<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../public/css/styles.css">
    <script src="../../public/jsm/three.min.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.138.0/build/three.module.js",
          "OrbitControls": "https://unpkg.com/three@0.138.0/examples/jsm/controls/OrbitControls.js"
        }
      }
    </script>
<body>
  <header>
    <div class="screen_frame">
      <div class="menu_logo">
        <img src="../public/image/logo_web_game.png" style="height: 24px;width: 24px;">
      </div>
      <div class="menu_navbar">
        <ul>
          <li>
              <a class="active" href="#project">project</a>
          </li>
          <li>
              <a href="#keep">the keep</a>
          </li>
          <li>
              <a href="#factions">factions</a>
          </li>
          <li>
              <a href="#world">the world</a>
          </li>
      </ul>
      </div>
    </div>
  </header>
  <dib class="main">
    <section id="project">
      <!-- <div id="abc" style="position: fixed;">          
      </div> -->
      <div id="loop">
        <h1><b>CYBER</b>FICTION IS THE <b><i>REAL</i></b> <span>STORY</span> IN THE <span><i>METAVERSE.</i></span></h1>
        <h1><b>CYBER</b>FICTION IS THE <b><i>REAL</i></b> <span>STORY</span> IN THE <span><i>METAVERSE.</i></span></h1>
        <h1><b>CYBER</b>FICTION IS THE <b><i>REAL</i></b> <span>STORY</span> IN THE <span><i>METAVERSE.</i></span></h1>
      </div>
      <h3>CYBERFICTION AIMS TO BE A DECENTRALIZED COMMUNITY THAT CAN <br> CREATE NEW VALUES AND PROFITS THROUGH PLAY IN THE VIRTUAL <br> WORLD.</h3>
      <h4>...SCROLL TO READ</h4>
      <div class="canvas-container"></div>

  </section>
  <section id="keep">

  </section>
  <section id="factions">

  </section>
  <section id="world">
  </section>
  </dib>

    <!-- Heard page -->
    <!-- <header>
        <div class="screen_frame">
            <div class="menu_navbar">
                <div class="menu">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" id="menu">
                        <path fill="#fff"
                            d="M3 6a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm0 6a1 1 0 0 1 1-1h16a1 1 0 1 1 0 2H4a1 1 0 0 1-1-1zm1 5a1 1 0 1 0 0 2h16a1 1 0 1 0 0-2H4z">
                        </path>
                    </svg>
                </div>
                <ul>
                    <li>
                        <a class="active" href="#project">project</a>
                    </li>
                    <li>
                        <a href="#keep">the keep</a>
                    </li>
                    <li>
                        <a href="#factions">factions</a>
                    </li>
                    <li>
                        <a href="#world">the world</a>
                    </li>
                </ul>
            </div>
            <div class="menu_logo">
                <div class="logo">
                    <img src="../public/image/logo_web_game.png" style="height: 24px;width: 24px;">
                </div>
                <div class="screen_content" style="pointer-events: none">

                </div>
            </div>
        </div>
    </header> -->

    <!-- Body page -->
    <!-- <div class="main">
        <section id="project" style="position: relative;">
            <div id="abc" style="position: fixed;">
                <div class="screen_content">

                    <p id="screen_content_header"></p>
                    <div class="screen_content_title">
                        <h1>project</h1>
                        <h1>technology</h1>
                        <h1>characters</h1>
                    </div>
                </div>
            </div>
            <img src="../public/image/red-hood.jpg"> 
        </section>
        <section id="keep" class="reveal">
            <img src="../public/image/thresh.jpg">

        </section>
        <section id="factions" class="reveal">
            <img src="../public/image/robot-girl.jpg">

        </section>
        <section id="world" class="reveal">
            <img src="../public/image/final-assasin.jpg">
        </section>
    </div> -->

    <!-- Footer page -->
    <!-- <footer></footer> -->
    <script src="../public/js/index.js" />
</body>

  <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.4.0/gsap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>  

  <script type="module">
    import { OrbitControls } from "../../public/jsm/controls/OrbitControls.js";
    import { FBXLoader } from "../../public/jsm/loaders/FBXLoader.js";
    import { GLTFLoader } from "../../public/jsm/loaders/GLTFLoader.js";

    let mouseX = 0;
			let mouseY = 0;

			let targetX = 0;
			let targetY = 0;

			const windowHalfX = window.innerWidth / 2;
			const windowHalfY = window.innerHeight / 2;
      let mesh,clock,mixer;

    // const tl = gsap.timeline();
    const container = document.querySelector('.canvas-container');
    const camera = new THREE.PerspectiveCamera(
      85,
      window.innerWidth / window.innerHeight,
      1,
      1000
    );
    //camera.position.set(900, 400, 900);
    camera.position.set(0, 6, 8);

    const scene = new THREE.Scene();

    scene.background = null
    // scene.fog = new THREE.Fog("#27313A", 150, 250);

    const ambientLight = new THREE.AmbientLight("#FFFFFF");
    scene.add(ambientLight);

    const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff);
    hemiLight.position.set(10, 20, 10);
    scene.add(hemiLight);

    const dirLight = new THREE.DirectionalLight("#ffffff");
    dirLight.position.set(10, 20, 10);
    dirLight.intensity = 1;
    dirLight.castShadow = true;
    dirLight.shadow.camera.top = 1000;
    dirLight.shadow.camera.bottom = -1000;
    dirLight.shadow.camera.left = -1000;
    dirLight.shadow.camera.right = 1000;
    dirLight.shadow.camera.far = 2000;
    dirLight.shadow.mapSize.width = 2048;
    dirLight.shadow.mapSize.height = 2048;
    scene.add(dirLight);    

    const loader = new GLTFLoader();

    loader.load("../../public/models/JinxPoseRender.glb", ( gltf ) => {
      mesh = gltf.scene
      mesh.scale.set(6, 6, 6);
      scene.add( mesh );
      const animations = gltf.animations;


					mixer = new THREE.AnimationMixer( mesh );
          const waveAction = mixer.clipAction( animations[ 0 ] );
          waveAction.play()
    });

    const renderer = new THREE.WebGLRenderer({
    //   canvas: canvas,
      antialias: true,
      alpha: false,
    });
    
    renderer.setClearColor( 0x000000, 0 );
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.autoClear = true;
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    container.appendChild(renderer.domElement);

    document.addEventListener( 'mousemove', onDocumentMouseMove );
    window.addEventListener("resize", onWindowResize, false);

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      render();
    }

    function onDocumentMouseMove( event ) {
      mouseX = ( event.clientX - windowHalfX );
      mouseY = ( event.clientY - windowHalfY );
    }

    clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);
      var delta = clock.getDelta();
  
    if ( mixer ) mixer.update( delta );
      render();
    }

    function render() {
      targetX = mouseX * .001;
				// targetY = mouseY * .001;

				if ( mesh ) {
					mesh.rotation.y += 0.05 * ( targetX - mesh.rotation.y );
					// mesh.rotation.x += 0.05 * ( targetY - mesh.rotation.x );
				}
      renderer.render(scene, camera);
    }

    animate();   
  </script>

</html>